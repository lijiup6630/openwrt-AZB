#### rtty远程管理

我的Server是Ubuntu20，搭建时注意Node.js要升级成新版本。



#### 环境搭建

```
git clone https://github.com/zhaojh329/rttys

cd ui
npm install
npm run build
cd ..

./build.sh linux amd64
```

#### 启动服务器

首先是设置密码：

```
root@liji-MS-7A37:/home/liji/Downloads/rttys/rttys-linux-amd64# ./rttys token
Please set a password:*******
Your token is: 3d597a57edfe9de0890c7f7030d2fe3f
```

启动：

```
root@liji-MS-7A37:/home/liji/Downloads/rttys/rttys-linux-amd64# ./rttys 
2022-04-25T00:54:37+08:00 |INFO| Go Version: go1.18.1
2022-04-25T00:54:37+08:00 |INFO| Go OS/Arch: linux/amd64
2022-04-25T00:54:37+08:00 |INFO| Rttys Version: 4.0.0
2022-04-25T00:54:37+08:00 |INFO| Git Commit: 87ac722
2022-04-25T00:54:37+08:00 |INFO| Build Time: 2022-04-25T00:52:45+0800
2022-04-25T00:54:37+08:00 |INFO| Listen device on: :5912 SSL off
2022-04-25T00:54:37+08:00 |INFO| Automatically select an available port for http proxy
2022-04-25T00:54:37+08:00 |INFO| Listen http proxy on: [::]:38325
2022-04-25T00:54:37+08:00 |INFO| Listen user on: :5913 SSL off
2022-04-25T00:54:38+08:00 |DEBU| Device '192.168.31.132:53175' connected
2022-04-25T00:54:38+08:00 |INFO| Device 'My-Device' registered, proto 3
2022-04-25T00:54:50+08:00 |DEBU| Device '192.168.31.132:53175' disconnected
2022-04-25T00:54:50+08:00 |INFO| Device 'My-Device' unregistered
2022-04-25T00:54:50+08:00 |INFO| Device 'My-Device' unregistered
2022-04-25T00:54:50+08:00 |DEBU| Device '192.168.31.132:53176' connected
2022-04-25T00:54:50+08:00 |INFO| Device 'My-Device' registered, proto 3

```

重启OpenWrt的rtty服务能看到上线了。

```
root@OpenWrt:/etc/config# cat /etc/config/rtty 
# You must specify an interface or id,
# If the id is not specified, RTTY will uses the MAC address
# of the interface you specify as its ID, otherwise the id
# you specify is used as its ID

config rtty
#   option  interface   'lan'
   option  id          'My-Device'
   option  description 'Description of my device'
   option  host        '192.168.31.44'  # Server host
   option  port        '5912'              # Server Port
#   option  ssl         1                   # Whether to use ssl
#   option  insecure    '1'                 # Allow insecure server connections when using SSL
#   option  token       'your-token'        # generated by rttys
   option  username    'root'              # Skip a second login authentication. See man login(1) about the details
#   option  verbose     '1'                 # verbose log
root@OpenWrt:/etc/config# 
```

连接用的5912，我在server上访问http://192.168.31.44:5913/

![image-20220425005841140](.\pic\image-20220425005841140-16508195229741.png)

出现了登录页面。

这里输入用户名密码就进去了。

![image-20220425010416017](E:\openwrt-x86-文档\intelopenwrt-document\pic\image-20220425010416017.png)

可以选择执行命令，命令行之类的远程管理操作了。















#### LOG

```
liji@liji-MS-7A37:~/Downloads/rttys/ui$ npm install
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'v-click-outside-x@3.7.1',
npm WARN EBADENGINE   required: { node: '>=8.11.4', npm: '6.4.1' },
npm WARN EBADENGINE   current: { node: 'v16.14.2', npm: '8.7.0' }
npm WARN EBADENGINE }
npm WARN deprecated source-map-url@0.4.1: See https://github.com/lydell/source-map-url#deprecated
npm WARN deprecated @hapi/bourne@1.3.2: This version has been deprecated and is no longer supported or maintained
npm WARN deprecated @hapi/topo@3.1.6: This version has been deprecated and is no longer supported or maintained
npm WARN deprecated urix@0.1.0: Please see https://github.com/lydell/urix#deprecated
npm WARN deprecated har-validator@5.1.5: this library is no longer supported
npm WARN deprecated eslint-loader@2.2.1: This loader has been deprecated. Please use eslint-webpack-plugin
npm WARN deprecated resolve-url@0.2.1: https://github.com/lydell/resolve-url#deprecated
npm WARN deprecated source-map-resolve@0.5.3: See https://github.com/lydell/source-map-resolve#deprecated
npm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies
npm WARN deprecated chokidar@2.1.8: Chokidar 2 does not receive security updates since 2019. Upgrade to chokidar 3 with 15x fewer dependencies
npm WARN deprecated querystring@0.2.0: The querystring API is considered Legacy. new code should use the URLSearchParams API instead.
npm WARN deprecated html-webpack-plugin@3.2.0: 3.x is no longer supported
npm WARN deprecated babel-eslint@10.1.0: babel-eslint is now @babel/eslint-parser. This package will no longer receive updates.
npm WARN deprecated @hapi/address@2.1.4: Moved to 'npm install @sideway/address'
npm WARN deprecated uuid@3.4.0: Please upgrade  to version 7 or higher.  Older versions may use Math.random() in certain circumstances, which is known to be problematic.  See https://v8.dev/blog/math-random for details.
npm WARN deprecated request@2.88.2: request has been deprecated, see https://github.com/request/request/issues/3142
npm WARN deprecated @hapi/hoek@8.5.1: This version has been deprecated and is no longer supported or maintained
npm WARN deprecated @hapi/joi@15.1.1: Switch to 'npm install joi'
npm WARN deprecated svgo@1.3.2: This SVGO version is no longer supported. Upgrade to v2.x.x.
npm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1

added 1429 packages, and audited 1430 packages in 2m

102 packages are looking for funding
  run `npm fund` for details

20 vulnerabilities (7 moderate, 13 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
liji@liji-MS-7A37:~/Downloads/rttys/ui$ npm run build

> rttys-ui@0.1.0 build
> vue-cli-service build


⠏  Building for production...


 WARNING  Compiled with 2 warnings                                                                             00:48:15

 warning  

asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).
This can impact web performance.
Assets: 
  img/ionicons.a2c4a261.svg (542 KiB)

 warning  

webpack performance recommendations: 
You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application.
For more info visit https://webpack.js.org/guides/code-splitting/

  File                                   Size                                  Gzipped

  dist/js/chunk-vendors.c336145c.js      232.86 KiB                            232.95 KiB
  dist/js/app.d3df87e9.js                10.76 KiB                             10.79 KiB
  dist/css/chunk-vendors.7e310e6c.css    39.12 KiB                             38.58 KiB
  dist/css/app.0e046291.css              4.07 KiB                              4.09 KiB

  Images and other types of assets omitted.

 DONE  Build complete. The dist directory is ready to be deployed.
 INFO  Check out deployment instructions at https://cli.vuejs.org/guide/deployment.html
root@liji-MS-7A37:/home/liji/Downloads/rttys# ./build.sh linux amd64
root@liji-MS-7A37:/home/liji/Downloads/rttys# ls
api.go     client           CONTRIBUTING_ZH.md  generate-CA.sh  LICENSE    README_ZH.md       user.go
broker.go  command.go       database.go         go.mod          log        rttys.conf         utils
build.sh   config           device.go           go.sum          main.go    rttys-linux-amd64  version
cache      CONTRIBUTING.md  Dockerfile          http.go         README.md  ui
root@liji-MS-7A37:/home/liji/Downloads/rttys# rttys
rttys：未找到命令
root@liji-MS-7A37:/home/liji/Downloads/rttys# find ./ -name rttys
./rttys-linux-amd64/rttys
root@liji-MS-7A37:/home/liji/Downloads/rttys# 

```

